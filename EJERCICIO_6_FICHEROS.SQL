DROP SCHEMA IF EXISTS EJERCICIO_6;
CREATE SCHEMA EJERCICIO_6;
USE EJERCICIO_6;

# SEDE (ID_PAIS, PAIS, CIUDAD, DIRECCIÓN, TELEFONO, DIRECTOR)
CREATE TABLE SEDE(
	ID_PAIS INT PRIMARY KEY AUTO_INCREMENT,
    PAIS VARCHAR (50) NOT NULL,
    CIUDAD VARCHAR (50) NOT NULL, 
    DIRECCION VARCHAR (100) NOT NULL,
    TELEFONO VARCHAR (15) UNIQUE NOT NULL DEFAULT "000000000",
    DIRECTOR VARCHAR (50)
);

INSERT INTO SEDE VALUES 
(DEFAULT, "ESPAÑA", "GRANADA", "UNA CALLLE", "3234567890", "LUIS"),
(DEFAULT, "ESPAÑA", "GRANADA", "UNA CALLLE", "1234567890", "LUIS");

SELECT * FROM SEDE;

# PROYECTO (CODIGO_PROYECTO, TÍTULO, FECHA_INICIO, FECHA_FIN, PRESUPUESTO, RESPONSABILIDAD, ID_PAIS)
CREATE TABLE PROYECTO (
	CODIGO_PROYECTO INT PRIMARY KEY AUTO_INCREMENT,
    TITULO VARCHAR (100),
    FECHA_INICIO DATE,
    FECHA_FIN DATE,
    PRESUPUESTO DECIMAL (9,2) DEFAULT 10000, 
    RESPONSABILIDAD VARCHAR (50), 
    ID_PAIS INT,
    
    FOREIGN KEY (ID_PAIS) REFERENCES SEDE(ID_PAIS),
    
    CONSTRAINT FECHA_FIN_POSTERIOR CHECK (FECHA_FIN > FECHA_INICIO)
);


# POBLACIÓN (ID_POBLACION, NOMBRE, PAIS, HABITANTES)
CREATE TABLE POBLACION(
	ID_POBLACION INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR (50),
    PAIS VARCHAR (50),
    HABITANTES INT
);


# ACTUACION (CODIGO_ACTUACION, DESCRIPCIÓN, INVERSION, CODIGO_PROYECTO, ID_POBLACION)
CREATE TABLE ACTUACION(
	CODIGO_ACTUACION INT PRIMARY KEY AUTO_INCREMENT,
    DESCRIPCION MEDIUMTEXT,
    INVERSION DECIMAL (9,2),
    CODIGO_PROYECTO INT,
    ID_POBLACION INT,
    
    FOREIGN KEY (CODIGO_PROYECTO) REFERENCES PROYECTO(CODIGO_PROYECTO),
    FOREIGN KEY (ID_POBLACION) REFERENCES POBLACION(ID_POBLACION)
);

# ============================================================================================================
# ------------------------------------------- RESTRICCIONES --------------------------------------------------
# ============================================================================================================

# UNIQUE -> SIN REPETIDOS
# NOT NULL -> NO PUEDE SER NULO (TIENE QUE TENER DATOS)
# DEFAULT {10000} -> ES PARA PONER UN VALOR POR DEFECTO