DROP SCHEMA IF EXISTS PRUEBA_TECNICA_6;
CREATE SCHEMA PRUEBA_TECNICA_6;
USE PRUEBA_TECNICA_6;

# NOMBRE : LUIS GARCIA DIAZ

# QUIEN (ID, NOMBRE, EDAD)
CREATE TABLE QUIEN(
	ID INT AUTO_INCREMENT PRIMARY KEY,
    NOMBRE VARCHAR (50),
    EDAD TINYINT
);

INSERT INTO QUIEN (ID, NOMBRE, EDAD) VALUES
(1, 'El Grinch', 40),
(2, 'Quién1', 25),
(3, 'Quién2', 30),
(4, 'Quién3', 35);

# EL_GRINCH (ID_QUIEN_GRINCH, NOMBRE_MASCOTA, COLOR_PELO)
CREATE TABLE EL_GRINCH(
	ID_QUIEN_GRINCH INT PRIMARY KEY,
    NOMBRE_MASCOTA VARCHAR (50) DEFAULT "VERDE" UNIQUE,
    COLOR_PELO VARCHAR (30) DEFAULT "VERDE" UNIQUE,
    
    FOREIGN KEY (ID_QUIEN_GRINCH) REFERENCES QUIEN (ID)
);

INSERT INTO EL_GRINCH (ID_QUIEN_GRINCH, NOMBRE_MASCOTA, COLOR_PELO) VALUES
(1, 'Max', 'Verde'); 

# QUIEN_DE_VILLAQUIEN (ID_QUIEN_VILLAQUIEN, DIRECCION, OFICIO) 
CREATE TABLE QUIEN_DE_VILLAQUIEN(
	ID_QUIEN_VILLAQUIEN INT PRIMARY KEY,
    DIRECCION VARCHAR (100),
    OFICIO VARCHAR (30),
    
    FOREIGN KEY (ID_QUIEN_VILLAQUIEN) REFERENCES QUIEN (ID)
);

INSERT INTO QUIEN_DE_VILLAQUIEN (ID_QUIEN_VILLAQUIEN, DIRECCION, OFICIO) VALUES
(2, 'Calle de Quién1', 'Cocinero'),
(3, 'Calle de Quién2', 'Artesano'),
(4, 'Calle de Quién3', 'Músico');

# REGALO (ID, NOMBRE, PRECIO)
CREATE TABLE REGALO(
	ID INT AUTO_INCREMENT PRIMARY KEY,
    NOMBRE VARCHAR (50),
    PRECIO DECIMAL (9,2)
);

INSERT INTO REGALO (ID, NOMBRE, PRECIO) VALUES
(1, 'Regalo1', 50),
(2, 'Regalo2', 30),
(3, 'Regalo3', 20);

# OBJETO (ID_REGALO, PESO, MATERIAL)
CREATE TABLE OBJETO(
	ID_REGALO INT PRIMARY KEY,
    PESO INT,
    MATERIAL VARCHAR (50),
    
    FOREIGN KEY (ID_REGALO) REFERENCES REGALO (ID)
);

INSERT INTO OBJETO (ID_REGALO, PESO, MATERIAL) VALUES
(1, 2, 'Metal'),
(2, 1, 'Plástico'),
(3, 0.5, 'Madera');

# EXPERIENCIA (ID_REGALO, DURACION, UBICACION, FECHA_CADUCIDAD)
CREATE TABLE EXPERIENCIA(
	ID_REGALO INT PRIMARY KEY,
    DURACION TIME,
    UBICACION VARCHAR (100),
    FECHA_CADUCIDAD DATE,
    
    FOREIGN KEY (ID_REGALO) REFERENCES REGALO (ID)
);

INSERT INTO EXPERIENCIA (ID_REGALO, DURACION, UBICACION, FECHA_CADUCIDAD) VALUES
(1, '12:00:00', 'Parque', '2023-12-31'),
(2, '12:00:00', 'Teatro', '2023-11-30'),
(3, '12:00:00', 'Museo', '2023-12-15');

# ELECTRONICA (ID_REGALO, BATERIA?)
CREATE TABLE ELECTRONICA(
	ID_REGALO INT PRIMARY KEY,
    BATERIA BOOLEAN,
    
    FOREIGN KEY (ID_REGALO) REFERENCES REGALO (ID)
);

INSERT INTO ELECTRONICA (ID_REGALO, BATERIA) VALUES
(1, 1),
(2, 0),
(3, 1);

# JUGUETE_PERRO (ID_REGALO, TAMAÑO, DURABILIDAD)
CREATE TABLE JUGUETE_PERRO(
	ID_REGALO INT PRIMARY KEY,
    TAMAÑO VARCHAR (30), 
    DURABILIDAD VARCHAR (30),
    
    FOREIGN KEY (ID_REGALO) REFERENCES REGALO (ID)
);

INSERT INTO JUGUETE_PERRO (ID_REGALO, TAMAÑO, DURABILIDAD) VALUES
(1, 'Grande', 'Alta'),
(2, 'Pequeño', 'Media'),
(3, 'Mediano', 'Alta');

# QUIEN_DE_VILLAQUIEN_RECIBE_REGALO (ID_QUIEN_VILLAQUIEN, ID_REGALO, FECHA_HORA)
CREATE TABLE QUIEN_DE_VILLAQUIEN_RECIBE_REGALO (
	ID_QUIEN_VILLAQUIEN INT,
    ID_REGALO INT,
    FECHA_HORA DATETIME,
    
    PRIMARY KEY (ID_QUIEN_VILLAQUIEN, ID_REGALO, FECHA_HORA),
    
    FOREIGN KEY (ID_QUIEN_VILLAQUIEN) REFERENCES QUIEN_DE_VILLAQUIEN (ID_QUIEN_VILLAQUIEN),
	FOREIGN KEY (ID_REGALO) REFERENCES REGALO (ID)
);

INSERT INTO QUIEN_DE_VILLAQUIEN_RECIBE_REGALO (ID_QUIEN_VILLAQUIEN, ID_REGALO, FECHA_HORA) VALUES
(2, 1, '2023-11-27 10:00:00'),
(3, 2, '2023-11-27 11:30:00'),
(4, 3, '2023-11-27 13:00:00');

# EL_GRINCH_ROBA_QUIEN_DE_VILLAQUIEN_RECIBE_REGALO (ID_QUIEN_GRINCH, ID_QUIEN_VILLAQUIEN,  ID_REGALO, FECHA_HORA)
CREATE TABLE EL_GRINCH_ROBA_QUIEN_DE_VILLAQUIEN_RECIBE_REGALO (
	ID_QUIEN_GRINCH INT,
    ID_QUIEN_VILLAQUIEN INT,
    ID_REGALO INT,
    FECHA_HORA DATETIME,
    
    PRIMARY KEY (ID_QUIEN_GRINCH, ID_QUIEN_VILLAQUIEN, ID_REGALO, FECHA_HORA),
    
	FOREIGN KEY (ID_QUIEN_GRINCH) REFERENCES EL_GRINCH (ID_QUIEN_GRINCH),
    FOREIGN KEY (ID_QUIEN_VILLAQUIEN) REFERENCES QUIEN_DE_VILLAQUIEN (ID_QUIEN_VILLAQUIEN),
	FOREIGN KEY (ID_REGALO) REFERENCES REGALO (ID)
);

INSERT INTO EL_GRINCH_ROBA_QUIEN_DE_VILLAQUIEN_RECIBE_REGALO (ID_QUIEN_GRINCH, ID_QUIEN_VILLAQUIEN, ID_REGALO, FECHA_HORA) VALUES
(1, 2, 1, '2023-11-27 10:15:00'),
(1, 3, 2, '2023-11-27 11:45:00'),
(1, 4, 3, '2023-11-27 13:15:00');

# EL_GRINCH_COMPRA_JUGUETE_PERRO (ID_QUIEN_GRINCH, ID_REGALO_JUGUETE_PERRO)
CREATE TABLE EL_GRINCH_COMPRA_JUGUETE_PERRO (
	ID_QUIEN_GRINCH INT,
    ID_REGALO_JUGUETE_PERRO INT,
    
    PRIMARY KEY (ID_QUIEN_GRINCH, ID_REGALO_JUGUETE_PERRO),
    
	FOREIGN KEY (ID_QUIEN_GRINCH) REFERENCES EL_GRINCH (ID_QUIEN_GRINCH),
    FOREIGN KEY (ID_REGALO_JUGUETE_PERRO) REFERENCES JUGUETE_PERRO (ID_REGALO)
);

INSERT INTO EL_GRINCH_COMPRA_JUGUETE_PERRO (ID_QUIEN_GRINCH, ID_REGALO_JUGUETE_PERRO) VALUES
(1, 1),
(1, 3);
