DROP SCHEMA IF EXISTS PRUEBA_TECNICA1;
CREATE SCHEMA PRUEBA_TECNICA1;
USE PRUEBA_TECNICA1;

# ENTRENADOR (ID, NOMBRE, EDAD)
CREATE TABLE ENTRENADOR (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR (50),
    EDAD TINYINT
);

INSERT INTO ENTRENADOR VALUES 
(DEFAULT, "ENTRENADOR 1 ", 24),
(DEFAULT, "ENTRENADOR 2 ", 42),
(DEFAULT, "ENTRENADOR 3 ", 29);

# POKEMON (ID, NOMBRE, TIPO, NIVEL, ID_ENTRENADOR, FECHA, POKEBALS)
CREATE TABLE POKEMON (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR (50) NOT NULL,
    TIPO VARCHAR (50) NOT NULL,
    NIVEL TINYINT NOT NULL,
    ID_ENTRENADOR INT,
    FECHA DATETIME, 
    POKEBALS TINYINT,
    
    FOREIGN KEY (ID_ENTRENADOR) REFERENCES ENTRENADOR (ID),
    
    CONSTRAINT POKEBAL_NO_MAS_5 CHECK (POKEBALS BETWEEN 1 and 5)
    
);

INSERT INTO POKEMON VALUES
(DEFAULT, "PICACHU", "FUEGO", 45, 1, '2023-01-01 17:45:09')


# GIMNASIO (ID, NOMBRE, CIUDAD, ID_ENTRENADOR)
CREATE TABLE GIMNASIO (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR (50) UNIQUE,
    CIUDAD VARCHAR (50) DEFAULT "CIUDAD ESMERALDA",
    ID_ENTRENADOR INT,
    
    FOREIGN KEY (ID_ENTRENADOR) REFERENCES ENTRENADOR (ID)
    
);

INSERT INTO GIMNASIO  VALUES 
(DEFAULT, "YO 10", DEFAULT, 1);

# MEDALLA (ID, FECHA, NOMBRE, ID_GIMNASIO, ID_ENTRENADOR)
CREATE TABLE MEDALLA (
	ID INT PRIMARY KEY AUTO_INCREMENT,
    FECHA DATE,
    NOMBRE VARCHAR (50),
    ID_ENTRENADOR INT,
    ID_GIMNASIO INT,
    
    FOREIGN KEY (ID_ENTRENADOR) REFERENCES ENTRENADOR (ID),
    FOREIGN KEY (ID_GIMNASIO) REFERENCES GIMNASIO (ID)
    
);

# ENTRENADOR_DESAFIA_GIMNASIO (ID_ENTRENADOR, ID_GIMNASIO, FECHA)
CREATE TABLE ENTRENADOR_DESAFIA_GIMNASIO(
	ID_ENTRENADOR INT,
    ID_GIMNASIO INT,
    FECHA DATE, 
    
    PRIMARY KEY (ID_ENTRENADOR, ID_GIMNASIO, FECHA),
    
    FOREIGN KEY (ID_ENTRENADOR) REFERENCES ENTRENADOR (ID),
    FOREIGN KEY (ID_GIMNASIO) REFERENCES GIMNASIO (ID)
)
